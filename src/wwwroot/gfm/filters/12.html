<div class="gfm"><div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">async</span> <span class="pl-en">Task</span> <span class="pl-en">includeFile</span>(<span class="pl-en">TemplateScopeContext</span> <span class="pl-smi">scope</span>, <span class="pl-k">string</span> <span class="pl-smi">virtualPath</span>)
{
    <span class="pl-k">var</span> <span class="pl-en">file </span>= scope.Context.VirtualFiles.GetFile(virtualPath);
    <span class="pl-k">if</span> (file == <span class="pl-c1">null</span>)
        <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-en">FileNotFoundException</span>(<span class="pl-pds">$"</span><span class="pl-s">includeFile '</span>{virtualPath}<span class="pl-s">' was not found</span><span class="pl-pds">"</span>);

    <span class="pl-k">using</span> (<span class="pl-k">var</span> <span class="pl-en">reader </span>= file.OpenRead())
    {
        <span class="pl-k">await</span> reader.CopyToAsync(scope.OutputStream);
    }
}</pre></div>
</div>