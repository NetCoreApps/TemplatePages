<div class="gfm"><div class="highlight highlight-source-cs"><pre><span class="pl-k">using</span> <span class="pl-en">System.Linq</span>;
<span class="pl-k">using</span> <span class="pl-en">System.Collections.Generic</span>;
<span class="pl-k">using</span> <span class="pl-en">ServiceStack</span>;
<span class="pl-k">using</span> <span class="pl-en">ServiceStack.Templates</span>;

<span class="pl-k">namespace</span> <span class="pl-en">TemplatePages</span>
{
    [Page(<span class="pl-s"><span class="pl-pds">"</span>products<span class="pl-pds">"</span></span>)]
    [PageArg(<span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Products<span class="pl-pds">"</span></span>)]
    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ProductsPage</span> : <span class="pl-en">TemplateCodePage</span>
    {
        <span class="pl-k">string</span> <span class="pl-en">render</span>(<span class="pl-en">Product</span>[] <span class="pl-smi">products</span>) =&gt; <span class="pl-pds">$@"</span><span class="pl-s"></span>
<span class="pl-s">        &lt;table class='table table-striped'&gt;</span>
<span class="pl-s">            &lt;thead&gt;</span>
<span class="pl-s">                &lt;tr&gt;</span>
<span class="pl-s">                    &lt;th&gt;&lt;/th&gt;</span>
<span class="pl-s">                    &lt;th&gt;Name&lt;/th&gt;</span>
<span class="pl-s">                    &lt;th&gt;Price&lt;/th&gt;</span>
<span class="pl-s">                &lt;/tr&gt;</span>
<span class="pl-s">            &lt;/thead&gt;</span>
<span class="pl-s">            </span>{products.OrderBy(x =&gt; x.Category).ThenBy(x =&gt; x.ProductName).Map(x =&gt; <span class="pl-pds">$@"</span><span class="pl-s"></span>
<span class="pl-s">                &lt;tr&gt;</span>
<span class="pl-s">                    &lt;th&gt;</span>{x.Category}<span class="pl-s">&lt;/th&gt;</span>
<span class="pl-s">                    &lt;td&gt;</span>{x.ProductName.HtmlEncode()}<span class="pl-s">&lt;/td&gt;</span>
<span class="pl-s">                    &lt;td&gt;</span>{x.UnitPrice:C}<span class="pl-s">&lt;/td&gt;</span>
<span class="pl-s">                &lt;/tr&gt;</span><span class="pl-pds">"</span>).Join(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)}<span class="pl-s"></span>
<span class="pl-s">        &lt;/table&gt;</span><span class="pl-pds">"</span>;
    }
}</pre></div>
</div>