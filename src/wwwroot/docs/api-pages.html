<!--
title: API Pages
order: 20
-->

<p>
    When not being used as a templating language to render text to a stream, ServiceStack Templates can be used as a 
    high-level wrist-friendly dynamic language that provides a glue to your App's .NET APIs that lets you easily 
    compose C# methods and evaluate binding expressions.
</p>

<p>
    We can also take advantage of its real-time feedback and optimal development experience to also rapidly develop 
    high-performance Web APIs which like Web Pages can be developed whilst the Web App is running without any pre-compilation
    enabling the fastest way to develop Web APIs in .NET.    
</p>

<p>
    To enable this we need to specify the path where our "API Pages" are located when registering TemplatePagesFeature:
</p>

<pre class="cs"><code>Plugins.Add(new TemplatePagesFeature {
    ApiPath = "/api"
});</code></pre>

<p>
    All pages within the <b>/api</b> folder are then treated as Web APIs where instead of writing their response to the response
    stream, their return value is serialized in the requested Content-Type. 
</p>

<p>
    You can return a result in Templates with the <em>return</em> filter:
</p>

<pre class="cs"><code>{{ pass: response | return }}</code></pre>

<p>
    This will immediately terminate evaluation of the page and store the response in the <em>PageResult</em> the Page was
    rendered using. The return value is then used as the response for the Web API.
</p>

<h3>API Page Examples</h3>

<p>
    To demonstrate API Pages in action we've added Web APIs equivalents for Rockwind's 
    <a href="http://rockwind-sqlite.netcore.io/northwind/customers">customers</a> and
    <a href="http://rockwind-sqlite.netcore.io/northwind/products">products</a> HTML pages with the implementation below:
</p>

<style>
    th:first-child {
        text-align: right;
    }
</style>

<h4><a href="http://rockwind-sqlite.netcore.io/api/customers">/api/customers</a></h4>

<p>
    The entire implementation of the customers API is below:
</p>

<pre class="cs"><code>{{ 'examples/api-customers.txt' | includeFile }}</code></pre>

<p>
    These are some of the API's that are made available with the above implementation:
</p>

<table class="table table-striped">
    <thead style="text-align:center;color:#fff;font-size:22px;">
        <tr class="bg-success"><td colspan="2">/customers API</td></tr>
    </thead>
    <tr>
        <th>All Customers</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers">/api/customers</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.html">/api/customers.html</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.csv">/api/customers.csv</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers?format=html">/api/customers?format=html</a></div>
            <div style="margin:5px 0 0 0;color:#888;font-size:13px"><b>Accept</b> HTTP Header also supported</div>
        </td>
    </tr>
    <tr>
        <th>Alfreds Futterkiste Details</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers/ALFKI">/api/customers/ALFKI</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers/ALFKI.html">/api/customers/ALFKI.html</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers/ALFKI.csv">/api/customers/ALFKI.csv</a></div>
        </td>
    </tr>
    <tr>
        <th>As List</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers?id=ALFKI">/api/customers?id=ALFKI</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.html?id=ALFKI">/api/customers.html?id=ALFKI</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.csv?id=ALFKI">/api/customers.csv?id=ALFKI</a></div>
        </td>
    </tr>
    <tr>
        <th>Customers in Germany</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers?country=Germany">/api/customers?country=Germany</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.html?country=Germany">/api/customers.html?country=Germany</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.csv?country=Germany">/api/customers.csv?country=Germany</a></div>
        </td>
    </tr>
    <tr>
        <th>Customers in London</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers?city=London">/api/customers?city=London</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/customers.html?city=London">/api/customers.html?city=London</a></div>
        </td>
    </tr>    
    <tr>
        <th>Complex Query</th>
        <td>
            <a href="http://rockwind-sqlite.netcore.io/api/customers?city=London&amp;country=UK&amp;limit=3">/api/customers?city=London&amp;country=UK&amp;limit=3</a>
        </td>
    </tr>
</table>

<h4><a href="http://rockwind-sqlite.netcore.io/api/products">/api/products</a></h4>

<p>
    The Products API is an example of a more complex API where data is sourced from multiple tables:
</p>

<pre class="cs"><code>{{ 'examples/api-products.txt' | includeFile }}</code></pre>

<p>
    Which enables the following APIs:
</p>

<table class="table table-striped">
    <thead style="text-align:center;color:#fff;font-size:22px;">
        <tr class="bg-success"><td colspan="2">/products API</td></tr>
    </thead>
    <tr>
        <th>Chai Product Details</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products/1">/api/products/1</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products/1.html">/api/products/1.html</a></div>
        </td>
    </tr>
    <tr>
        <th>As List</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products?id=1">/api/products?id=1</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products.html?id=1">/api/products.html?id=1</a></div>
        </td>
    </tr>
    <tr>
        <th>Beverage Products</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products?category=Beverages">/api/products?category=Beverages</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products.html?category=Beverages">/api/products.html?category=Beverages</a></div>
        </td>
    </tr>
    <tr>
        <th>Products from Bigfoot Breweries</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products?supplier=Bigfoot+Breweries">/api/products?supplier=Bigfoot+Breweries</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products.html?supplier=Bigfoot+Breweries">/api/products.html?supplier=Bigfoot+Breweries</a></div>
        </td>
    </tr>
    <tr>
        <th>Products containing Tofu</th>
        <td>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products?nameContains=Tofu">/api/products?nameContains=Tofu</a></div>
            <div><a href="http://rockwind-sqlite.netcore.io/api/products.html?nameContains=Tofu">/api/products.html?nameContains=Tofu</a></div>
        </td>
    </tr>
</table>


{{ "doc-links" | partial({ order }) }}
